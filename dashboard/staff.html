<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Dashboard Peserta — LMS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --brand: #a80308;
        --muted: #6b7280;
        --card-shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
        --pink: #f6b0d6;
      }
      body {
        font-family: "Inter", sans-serif;
        /* background: #f3f4f6; */
        color: #111827;
      }

      /* common card */
      .card {
        background: #fff;
        border-radius: 12px;
        box-shadow: var(--card-shadow);
      }

      /* big hero */
      .hero {
        background: linear-gradient(180deg, #0b1220 0%, #0f1724 100%);
        color: #fff;
        border-radius: 12px;
        box-shadow: 0 25px 50px rgba(2, 6, 23, 0.35);
      }

      /* sedikit polishing untuk progress */
      .progress-fill {
        transition: width 350ms ease;
      }

      .red-header {
        background: var(--brand);
        color: #fff;
        border-radius: 8px;
        padding: 10px 14px;
        font-weight: 700;
      }

      /* small dot center between stat cards */
      .center-dot {
        width: 16px;
        height: 16px;
        background: var(--pink);
        border: 3px solid #fff;
        border-radius: 999px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
      }

      /* donut simple */
      .donut-outer {
        width: 120px;
        height: 120px;
        border-radius: 9999px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      /* activity list item */
      .activity-item {
        padding: 12px 0;
        border-bottom: 1px solid rgba(17, 24, 39, 0.05);
      }

      /* status badge small */
      .badge-green {
        background: #e6f7ee;
        color: #047857;
        padding: 6px 10px;
        border-radius: 8px;
        font-weight: 700;
        font-size: 12px;
      }
      .badge-yellow {
        background: #fffbeb;
        color: #92400e;
        padding: 6px 10px;
        border-radius: 8px;
        font-weight: 700;
        font-size: 12px;
      }
      .badge-red {
        background: #fef2f2;
        color: var(--brand);
        padding: 6px 10px;
        border-radius: 8px;
        font-weight: 700;
        font-size: 12px;
      }

      /* responsive tweaks */
      @media (max-width: 1024px) {
        .lg\\:col-span-8 {
          grid-column: span 8 / span 8;
        }
        .lg\\:col-span-4 {
          grid-column: span 4 / span 4;
        }
      }
    </style>
  </head>
  <body>
    <!-- NAVBAR -->
    <nav
      class="flex items-center justify-between px-8 py-4 border-b-2 border-gray-200 mb-4 bg-white"
    >
      <div class="flex items-center font-semibold">
        <img src="../img/logo.png" alt="Logo" class="w-10 mr-2" />
        <a
          href="../home/public.html"
          class="px-4 py-1 rounded-full font-semibold text-black hover:bg-gray-100"
          >Home</a
        >
        <a
          href="../dashboard/user.html"
          class="px-4 py-1 rounded-full font-semibold text-black hover:bg-gray-100"
          >Dashboard</a
        >
        <a
          href="../course/user.html"
          class="px-4 py-1 rounded-full font-semibold text-black hover:bg-gray-100"
          >MyCourse</a
        >
        <a
          href="#"
          class="px-4 py-1 rounded-full font-semibold text-black hover:bg-gray-100"
          >Site Administrator</a
        >
      </div>
      <div class="flex items-center gap-2">
        <img
          src="../img/notif.png"
          alt="notification"
          class="w-6 h-8 rounded-lg mr-10"
        />
        <div class="text-end">
          <p class="font-bold">Nama Pengguna</p>
          <p class="text-gray-400 text-[11px]">Nama Learning Staff</p>
        </div>
        <img src="../img/pp.png" alt="Profile" class="w-12 h-12 rounded-lg" />
      </div>
    </nav>

    <main class="mx-8 mb-12">
      <!-- HERO -->
      <section class="flex flex-col gap-6 h-70 md:flex-row">
      <div class="text-white bg-black rounded-2xl flex-3 w-2/3 p-8 my-auto">
        <h1 class="mb-3 max-w-4xl text-4xl font-bold capitalize">
          Alur proses pembelian dan pelunasan cabang
        </h1>
        <p class="mb-3 max-w-3xl text-lg">
          Memberikan pemahaman menyeluruh tentang alur kerja pembelian barang
          hingga proses pembayaran kepada supplier.
        </p>

        <!-- Progress (hero) - gunakan struktur yang konsisten -->
        <div class="flex mb-3 justify-between items-center text-sm text-gray-500 progress-wrapper">
          <div class="w-[90%] bg-gray-200 rounded h-1 relative">
            <div
              class="progress-fill bg-[#a80308] h-1 rounded absolute left-0 top-0"
              style="width: 0%;"
              role="progressbar"
              aria-valuemin="0"
              aria-valuemax="100"
              aria-valuenow="0"
            ></div>
          </div>
          <span class="progress-text pl-2">3 / 13</span>
        </div>

        <a
          href="../course/user.html"
          class="inline-block px-6 py-3 font-semibold text-white transition-colors rounded-lg bg-[#a80308] hover:bg-[#8a0206]"
        >
          Lanjutkan
        </a>
      </div>

      <div class="flex-1 flex flex-col gap-3 capitalize py-4">
        <h3 class="font-bold text-xl">Upcoming</h3>
        <div
          class="border-l-2 border-red-700 pl-2 h-12 flex flex-col justify-center"
        >
          <h6 class="font-semibold text-base">
            Prosedur penanganan komplain konsumen
          </h6>
          <p class="text-xs">12/10/2025</p>
        </div>
        <div
          class="border-l-2 border-red-700 pl-2 h-12 flex flex-col justify-center"
        >
          <h6 class="font-semibold text-base">Prosedur close sales order</h6>
          <p class="text-xs">15/10/2025</p>
        </div>
        <div
          class="border-l-2 border-red-700 pl-2 h-12 flex flex-col justify-center"
        >
          <h6 class="font-semibold text-base">
            Prosedur pengecekan kendaraan harian
          </h6>
          <p class="text-xs">17/10/2025</p>
        </div>
      </div>
    </section>

     
        <!-- Top grid: donut + stats + leaderboard -->
        <div class="my-6 grid grid-cols-1 md:grid-cols-8 gap-4">
          <!-- Donut -->
          <div class="col-span-1 md:col-span-2 bg-[#FFF4E5] rounded-lg shadow p-4">
            <!-- <h3 class="text-gray-600 font-semibold mb-4">Summary</h3> -->
            <div class="flex flex-col items-center gap-10">
              <div class="w-44 h-44">
                <canvas id="donutChart"></canvas>
              </div>
              <div class="flex-1 flex gap-x-24">
                <div>
                  <div class="flex items-center">
                    <span class="legend-dot bg-[#388E3C] w-3 h-3 mr-1"></span>
                      <div class="text-xs text-gray-500">Selesai</div>
                  </div>
                </div>
                <div>
                  <div class="flex items-center">
                    <span class="legend-dot bg-[#FFB300] w-3 h-3 mr-1"></span>
                      <div class="text-xs text-gray-500">Berlangsung</div>
                  </div>
                </div>
                <div>
                  <div class="flex items-center">
                    <span class="legend-dot bg-[#A80308] w-3 h-3 mr-1"></span>
                      <div class="text-xs text-gray-500">Belum Mulai</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Big stat cards -->
          <div
            class="col-span-1 md:col-span-4 grid grid-cols-2 md:grid-cols-2 gap-4"
          >
            <div class="bg-[#FFDAB3] rounded-lg p-2 px-10 shadow flex flex-col items-center text-center gap-2">
              <div class="text-3xl font-bold text-black">
                Jumlah Pelatihan Harus Diikuti
              </div>
              <div class="text-6xl font-medium mt-2">12</div>
            </div>
            <div class="bg-[#FFF4E5] rounded-lg p-2 px-10 shadow flex flex-col items-center text-center gap-2">
              <div class="text-3xl font-bold text-black">
                Pelatihan Berlangsung
              </div>
              <div class="text-6xl font-medium mt-2">8</div>
            </div><div class="bg-[#DFF5E1] rounded-lg p-2 px-10 shadow flex flex-col items-center text-center gap-2">
              <div class="text-3xl font-bold text-black">
                Pelatihan Selesai
              </div>
              <div class="text-6xl font-medium mt-2">3</div>
            </div><div class="bg-[#FFE5E5] rounded-lg p-2 px-10 shadow flex flex-col items-center text-center gap-2">
              <div class="text-3xl font-bold text-black">
                Pelatihan Belum Dimulai
              </div>
              <div class="text-6xl font-medium mt-2">1</div>
            </div>
          </div>

          <!-- Leaderboard -->
          <div class="col-span-1 md:col-span-2 bg-[#FFDAB3] rounded-lg shadow p-4">
            <h4 class="font-semibold text-gray-700 mb-3">Peringkat Saya</h4>
            <ol class="space-y-2">
              <li class="flex justify-between items-center">
                <div class="flex items-center gap-3">
                  <div
                    class="w-8 h-8 rounded-full bg-yellow-400 flex items-center justify-center font-semibold"
                  >
                    1
                  </div>
                  <div>
                    <div class="text-sm font-medium">Wardah Cahyani</div>
                    <div class="text-xs text-gray-500">40 pts</div>
                  </div>
                </div>
              </li>
              <li class="flex justify-between items-center">
                <div class="flex items-center gap-3">
                  <div
                    class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center font-semibold"
                  >
                    2
                  </div>
                  <div>
                    <div class="text-sm font-medium">Ervisa Oktavia</div>
                    <div class="text-xs text-gray-500">300 pts</div>
                  </div>
                </div>
              </li>
              <li class="flex justify-between items-center">
                <div class="flex items-center gap-3">
                  <div
                    class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center font-semibold"
                  >
                    3
                  </div>
                  <div>
                    <div class="text-sm font-medium">Sarah Amelia</div>
                    <div class="text-xs text-gray-500">290 pts</div>
                  </div>
                </div>
              </li>
              <li class="mt-2 text-xs text-gray-500">...dan seterusnya</li>
            </ol>
          </div>
        </div>

        <!-- Aktifitas Terbaru -->
        <section class="my-6">
          <div
            class="bg-red-700 text-white rounded-t-md px-4 py-2 font-semibold"
          >
            Aktifitas Terbaru
          </div>
          <div class="bg-white border border-t-0 rounded-b-md p-4">
            <ul class="divide-y">
              <!-- contoh item; nanti bisa di-render dari data -->
              <li class="py-3 flex gap-4">
                <div class="w-36 text-xs text-gray-500">3 Agustus 2025</div>
                <div class="flex-1">Menyelesaikan "Product Knowledge 1"</div>
              </li>
              <li class="py-3 flex gap-4">
                <div class="w-36 text-xs text-gray-500">1 Agustus 2025</div>
                <div class="flex-1">
                  Mulai "Soft Skills: Komunikasi Efektif"
                </div>
              </li>
              <li class="py-3 flex gap-4">
                <div class="w-36 text-xs text-gray-500">30 Juli 2025</div>
                <div class="flex-1">Mengerjakan kuis ERP Modul 1</div>
              </li>
              <li class="py-3 flex gap-4">
                <div class="w-36 text-xs text-gray-500">28 Juli 2025</div>
                <div class="flex-1">Memberikan feedback untuk course</div>
              </li>
            </ul>
          </div>
        </section>

        <!-- Pelatihan Selesai -->
        <section class="my-6">
          <div
            class="bg-red-700 text-white rounded-t-md px-4 py-2 font-semibold"
          >
            Pelatihan Selesai
          </div>
          <div class="bg-white border border-t-0 rounded-b-md p-4 space-y-4">
            <!-- controls: search + kategori + status -->
            <div class="flex flex-col md:flex-row gap-3 md:items-center">
              <input
                id="searchInput"
                type="text"
                placeholder="Search"
                class="flex-1 border rounded px-3 py-2"
              />
              <select id="kategori" class="border rounded px-3 py-2 w-48">
                <option value="">Semua Kategori</option>
                <option>Soft Skills</option>
                <option>Teknis</option>
              </select>
              <select id="status" class="border rounded px-3 py-2 w-48">
                <option value="">Semua Status</option>
                <option>Selesai</option>
                <option>Belum</option>
              </select>
            </div>

            <!-- items grid -->
            <div id="doneGrid" class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <!-- contoh card -->
              <div class="border rounded p-4 flex flex-col justify-between">
                <div>
                  <div class="text-sm font-semibold">Product Knowledge 1</div>
                  <div class="text-xs text-gray-500 mt-1">Kategori: Teknis</div>
                </div>
                <div class="mt-4 flex items-center justify-between">
                  <div class="text-xs text-gray-500">
                    Selesai: 3 Agustus 2025
                  </div>
                  <button
                    class="bg-emerald-500 text-white rounded px-3 py-1 text-xs"
                  >
                    Selesai
                  </button>
                </div>
              </div>

              <div class="border rounded p-4 flex flex-col justify-between">
                <div>
                  <div class="text-sm font-semibold">
                    Soft Skills: Komunikasi Efektif
                  </div>
                  <div class="text-xs text-gray-500 mt-1">
                    Kategori: Soft Skills
                  </div>
                </div>
                <div class="mt-4 flex items-center justify-between">
                  <div class="text-xs text-gray-500">
                    Selesai: 1 Agustus 2025
                  </div>
                  <button
                    class="bg-emerald-500 text-white rounded px-3 py-1 text-xs"
                  >
                    Selesai
                  </button>
                </div>
              </div>

              <div class="border rounded p-4 flex flex-col justify-between">
                <div>
                  <div class="text-sm font-semibold">ERP Modul 1</div>
                  <div class="text-xs text-gray-500 mt-1">Kategori: Teknis</div>
                </div>
                <div class="mt-4 flex items-center justify-between">
                  <div class="text-xs text-gray-500">Selesai: 30 Juli 2025</div>
                  <button
                    class="bg-emerald-500 text-white rounded px-3 py-1 text-xs"
                  >
                    Selesai
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
      

      <footer class="text-center text-xs text-gray-500 mt-6">
        &copy; 2025 LMS Ekatunggal
      </footer>
    </main>

    <!-- small JS for demo -->
    <script>
      // (Optional) animate hero progress a bit
      document.addEventListener("DOMContentLoaded", () => {
        const inner =
          document.querySelector(".hero .bg-[color\\:var\\(--brand\\)]") ||
          document.querySelector('.hero div[style*="background"]');
        // nothing required — progress shown by inline width
      });

      /* -------- Progress auto-update logic -------- */

      function parseProgressText(text) {
        // Match "3 / 13" or "3/13" or with spaces
        const m = String(text).match(/(\d+)\s*\/\s*(\d+)/);
        if (!m) return null;
        return [parseInt(m[1], 10), parseInt(m[2], 10)];
      }

      function updateProgress(wrapper) {
        const span = wrapper.querySelector(".progress-text");
        const fill = wrapper.querySelector(".progress-fill");
        if (!span || !fill) return;

        const nums = parseProgressText(span.textContent);
        if (!nums) {
          // jika format tak sesuai, kita set 0
          fill.style.width = "0%";
          fill.setAttribute("aria-valuenow", 0);
          return;
        }

        const [cur, total] = nums;
        let pct = 0;
        if (total === 0) pct = 0;
        else pct = (cur / total) * 100;

        // batasi antara 0 - 100
        pct = Math.max(0, Math.min(100, pct));

        // Two decimal precision untuk tampilan halus
        const pctStr = Math.round(pct * 100) / 100 + "%";

        fill.style.width = pctStr;
        // accessibility attributes -> kita gunakan current absolute value (cur) dan total
        fill.setAttribute("aria-valuenow", cur);
        fill.setAttribute("aria-valuemax", total);
        fill.setAttribute("aria-valuemin", 0);
      }

      function initProgressWrappers() {
        const wrappers = document.querySelectorAll(".progress-wrapper");
        wrappers.forEach((wrapper) => {
          // initial update
          updateProgress(wrapper);

          // Observe perubahan teks di dalam .progress-text
          const span = wrapper.querySelector(".progress-text");
          if (span) {
            const mo = new MutationObserver(() => {
              updateProgress(wrapper);
            });

            mo.observe(span, { characterData: true, childList: true, subtree: true });

            // Jika angka diubah melalui input/form di JS, mungkin Anda juga ingin
            // memanggil updateProgress(wrapper) langsung setelah mengubah teks.
          }
        });
      }

      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", initProgressWrappers);
      } else {
        initProgressWrappers();
      }

      // Donut Chart
      const ctx = document.getElementById("donutChart").getContext("2d");
      const donut = new Chart(ctx, {
        type: "doughnut",
        data: {
          labels: ["Selesai", "Berlangsung", "Belum Mulai"],
          datasets: [
            {
              data: [8, 3, 1],
              backgroundColor: ["#388E3C", "#FFB300", "#A80308"],
              borderWidth: 0,
            },
          ],
        },
        options: {
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
          },
          cutout: "60%",
        },
      });

      // (Opsional) fitur search sederhana untuk "Pelatihan Selesai"
      const searchInput = document.getElementById("searchInput");
      const grid = document.getElementById("doneGrid");
      const items = Array.from(grid.children);

      searchInput.addEventListener("input", function () {
        const q = this.value.toLowerCase();
        items.forEach((card) => {
          const title =
            card.querySelector(".text-sm")?.textContent?.toLowerCase() || "";
          if (!q || title.includes(q)) {
            card.style.display = "";
          } else {
            card.style.display = "none";
          }
        });
      });
    </script>
  </body>
</html>
